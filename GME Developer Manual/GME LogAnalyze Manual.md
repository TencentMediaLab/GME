为方便开发者调试和接入腾讯云游戏多媒体引擎产品 API，这里向您介绍游戏多媒体引擎日志排查工具。

# 日志分析工具介绍

使用 GME 的开发过程中，会出现一些问题需要获取到日志进行分析，此时可以使用此工具导入日志，根据相应的问题进行针对性的日志分析，解决问题。

日志分析工具网址为：[http://42.193.172.50:8080/](http://42.193.172.50:8080/)

错误码网址：[https://cloud.tencent.com/document/product/607/15173](https://cloud.tencent.com/document/product/607/15173)

# 工具使用

以下介绍如何使用日志分析工具。

> 注意
> 1、建议直接上传日志文件，文件后缀名为 .log。
> 2、建议日志文件的大小不要太大，最好小于20m。
> 3、必要时需要结合错误码进行分析。

## 日志获取

日志的获取请参考[日志获取](https://cloud.tencent.com/document/product/607/51456#.E5.A6.82.E4.BD.95.E5.8F.96.E5.BE.97.E6.97.A5.E5.BF.97.EF.BC.9F)。

![](https://main.qcloudimg.com/raw/d8b5071f5df40595c4b6b0a38b69369d.png)

## 日志导入

打开日志工具网址后，可以将日志拖入页面上传，也可以点击按钮【日志上传】上传日志。


![](https://main.qcloudimg.com/raw/68ef72b06b904127f48ef396db3accbc.png)

## 基本问题查询

![](https://main.qcloudimg.com/raw/4e7251674527f0980301001279935712.png)

上传日志后，点击页面右边【场景类型】下拉框，可以根据需要分析的问题选择不同的场景类型，可单选也可叠加。分析基本问题我们点击全量接口后，点击【查询】按钮，便会分析出一些基本的接口调用情况，例如：

**初始化信息、进房结果、设备操作、两次Poll打印的时间以及退房事件。**

### 例子

以一份我们 Demo 运行的日志为例。

![](https://main.qcloudimg.com/raw/2a6c8c25912cf83d17506b04ba8297ff.png)

可以看到初始化的 Appid 以及 Openid，左边是对应的时间点，可以在分析结果看到客户端是在 15点13分43秒 这个事件初始化了一次，之后又在 17点14分14秒 初始化了一次。同样的，也可以看到调用进房接口的时间，进入的房间号，以及进房的接口。从日志上看两次进房的结果都是成功的。


如果出现错误，也会在分析结果中提示，例如在这个客户端进房成功之后，没有退房的情况下又调用了进房的操作，就会有如下的显示：

![](https://main.qcloudimg.com/raw/4e0437126cf8b599ed01c6073a55cf56.png)


## 实时语音无声问题

同样的操作，在【场景类型】中选择【无声问题】，可以将无声问题分析效果叠加。

无声问题的分析主要分析的问题是在实时语音进房成功后（是否进房成功可以从【基本问题查询】中看出来），听不到房间里面的成员说话声音，或者说话的声音房间里面的成员听不到。客户端日志主要是从设备方面进行无声分析。

### 例子

![](https://main.qcloudimg.com/raw/d4f64bbf2ef26eb6ec5fef4a6ff94641.png)

在叠加上【无声问题】分析后，多出来了一些内容，可以用于判断为何无声。

1. **收到[xxxx]的事件 进房**
	**收到回调事件，包括退房、有音频包事件以及无音频包事件**，即ITMG_EVENT_ID_USER_HAS_AUDIO及ITMG_EVENT_ID_USER_NO_AUDIO 等在回调 ITMG_MAIN_EVNET_TYPE_USER_UPDATE 中的事件。 

2. **播放设备能量值:[2S]XX [4S]XX [6S]XX [8S]XX [10S]XX**
	这个日志结果代表在刚刚的十秒中，播放设备输出的能量值多少，[2s]xx 表示1-2s的平均输出的能量值为xx，能量值大于0代表扬声器是有声音播放的。采集设备同理。**可以通过此分析结果判断是否设备出现问题**。

3. **将[xxxx]添加进黑名单**
	添加进黑名单的成员是无法听到他说话的。**可以判断是否是因为拉入黑名单导致的无声现象**。

4. **收到[xxxx]发出的音频包**
	即能收到同房间成员 xxxx 发出来的音频包，说明网络层面上有收到音频包，**可以判断非网络问题**。


### 具体分析

![](https://main.qcloudimg.com/raw/ce87009d05887afec12f3cd8f5d59541.png)

从这个日志上来看，本端一直是收到同房间成员 10002 的音频包，以及播放设备有能量值，是正常的。
中间一段播放设备没有能量值，从事件上看能收到 10002 的“无音频包”事件，可以判断成员 10002 没有说话，导致的设备没有输出声音。


## 范围语音问题

如果使用了范围语音功能，请在分析日志的时候加上【范围语音】分析场景，会从日志中看出使用的语音模式以及进入的小队队伍号。

![](https://main.qcloudimg.com/raw/6937e5266b43de7246d66c8ad441718d.png)

## 离线语音问题

在【场景类型】中选择【离线语音问题】，可以看到语音消息接口的调用情况。

包括回调的结果，转文本的目标语音以及路径。

![](https://main.qcloudimg.com/raw/26fe1b0d1a286da9128439b6707e0fdb.png)



# 全量分析日志截图

![](https://main.qcloudimg.com/raw/33f5567843c2d81e4a975c1ef19bc717.png)